<html>

<head>
<meta http-equiv="Content-Type"
content="text/html; charset=x-sjis">
<meta name="GENERATOR" content="Microsoft FrontPage Express 2.0">
<title>麻雀とつモデル１</title>
</head>

<body background="801-04.gif" bgcolor="#000000" text="#FFFFFF">

<p><font color="#00FF80" size="7">麻雀とつモデル１</font><br>
<font color="#00FF80" size="2"><strong>（他家の種々の仕掛けに対し、任意の牌がいくつ余り出るかをモデル化した理論です。これを元にすれば、麻雀の過半の問題が解けるでしょう）<br>
この論文は基礎論文であり、実戦にすぐ応用するためには各自が計算を自分で行う必要がありますが(笑)</strong></font><br>
<font color="#FFFF80">全ての基礎研究及び実戦技術への基礎として　　　　1999/12/27　とつげき東北</font><br>
<br>
<br>
<br>
<font color="#FFFF00" size="6">導入：</font><br>
<br>
<font color="#FFFFFF">先に、他家３家が通常のシュンツ手を作る場合に、ある牌が何枚「不要」になるか、という研究を行った。</font><br>
しかし実戦では、「通常のシュンツ手」以外の手もしばしばある。<br>
トイトイはもちろんだが、例えばヤクハイをポンした場合、他が全てシュンツになるより、コウツが１組くらいできるのが普通である。<br>
またある事情で、ある部分にメンツが作れない場合（３が４枚切れると、１２３　２３４　３４５　の３つのメンツが完成不可能となる）などもある。このような偏りに対して、「通常のメンツ手」と同じ判断を行うと、誤差が大きくなってくるだろう。<br>
そこで先の研究をより一般化したバージョンの厳密な計算をしようと考えた。<br>
<br>
<br>
<br>
<font color="#FFFF00" size="6">研究の目的：</font><br>
<br>
最終的に、ある任意の数牌が他家に使用される平均枚数、場に出る平均個数を知る。<br>
それによって、例えば「待ちの良さ」が定量化できる。<br>
また例えば、「アンコスジは危険」と言われるが、どの程度危険になるのか、等もかなりの程度に定量化できるはずである。<br>
更には、ツモ山に残っている牌もかなりの程度で推測できる理論が作れるであろう。<br>
本来ランダムに積まれた山から、順に取り出し、そのうち「必要な牌枚数」だけが手に残り、他は場に出ているはずだからである。<br>
実戦でも、「本来出ていなければならない枚数より極端に少ない部分」に着目し、種々の対策が可能となるであろう。<br>
この研究はこのように、後の定量研究・実戦技術研究に極めて重要な結論を導くものである。<br>
従って、いつでも改変・補正しながら応用できる形にするため、途中経過を詳述することとする。<br>
<br>
<br>
<br>
<font color="#FFFF00" size="6">モデルの形成：</font><br>
<br>
他家が必要とする牌構成をモデル化する。<br>
<br>
他家３家が、合計　Ｔ組　のコウツを作っている場合に、残り　１２−Ｔ組　のシュンツが作られる。３組の頭（ただし１枚）が作られる。<br>
<br>
シュンツを作る位置というのは、１２３　２３４　３４５　４５６　５６７　６７８　７８９　の７通りが各色に４つ、３色あわせて８４箇所ある。<br>
８４通りのシュンツ候補から、１２−Ｔ通りのシュンツが作られるわけである。<br>
しかしながら、「ある事情で」ある部分にシュンツを作ることを諦める場合がある。<br>
例えばペンチャンを嫌って１２３を放棄したり、自分が６をアンコにして、６７８のシュンツを嫌う場合などがそれである。<br>
いずれにせよ、他家３人が合計　ｎ個　シュンツ部分を諦めたなら、８４−ｎ　通りのシュンツ候補から　１２−Ｔ　通りのシュンツが作られる計算になる。<br>
これを元に、「ある牌が他家のシュンツ候補として必要となる」平均個数を求めることができる。<br>
（「諦められたシュンツ部分の牌」の出やすさは増加し、そうでないシュンツ部分の牌の出やすさは減少する）<br>
<br>
コウツを作る位置は、基本的にランダムとせざるを得ないが、「ある場所にコウツはない」と、ほぼ判明する場合はある。<br>
終局に２枚目が出てポンされなければ、トイトイに使われていることはないし、３枚切れの牌は無条件でコウツではない。<br>
従ってコウツは、３４種類の牌のうちから、コウツでない　ｍ個　の場所を除いた　３４−ｍ通りの場所から　Ｔ通り作られる。<br>
これを元に、「ある牌が他家のコウツ候補として必要となる」平均個数を求めることができる。<br>
（「諦められたコウツ部分の牌」の出やすさは増加し、そうでないコウツ部分の牌の出やすさは減少する）<br>
<br>
頭を作る位置も、コウツと同様に考えられる。<br>
これは全くのランダムとする。頭の分の影響はそれほど大きくないこと、ドラなどを好んで頭にしやすいことなどから、細かく場合分けしてもモデルの精度が高まらないと考えられるからである。コウツとの衝突については無視する。「もちもち」状態はあり得ることであるし、他家がカンしてさらに１枚余り牌が減る、ということもあり、誤差の範疇であろう。<br>
<br>
さて、このモデルから、「他家に必要な牌の枚数」を計算することができる。<br>
<br>
また、特定の牌が「場に出る枚数」を知りたい以上、王牌の存在も無視できない。<br>
王牌に隠れる牌はどのように処理するか？<br>
王牌も仮想の「４人目の他家」と考えて、彼がランダムな１３枚を手に集めている、と捉えればよい。<br>
極めて明瞭で簡潔なモデルが完成するであろう。<br>
<br>
これを含め、「場に出る牌の枚数」が定量化できるだろう。<br>
<br>
<br>
<br>
<font color="#FFFF00" size="6">モデルについて：</font><br>
<br>
このモデルの欠点は<br>
・メンツ（や頭）を作る場所をランダムと仮定する<br>
部分である。<br>
２３４と持っているところに５を引けば、通常は２を切る。同じシュンツ候補のカンチャンでも、２４よりも３５を残すのが基本である。<br>
故に、単純に　１２３　２３４　３４５　４５６　５６７　６７８　７８９の中からランダムに作るのではなく、<font
color="#FF9955">実際はもう少し「内側に偏る」のである</font>（このモデルの構造に従うなら、この場合２３４ではなく、３４５にシュンツを「作っていた」と捉えなければならない）。<br>
この部分は、この理論では扱わない。<br>
後に実際の牌譜などから「偏り」の係数を導入すれば済むことであり、モデル段階でそれを曖昧な推察で導入する危険を犯す必要はないと判断する。<br>
<br>
また、「頭待ち」の形にしているが、これは以下の事情による。<br>
・メンツ作成部分のうち一枚が欠落している状態では、計算が煩雑になる。<br>
・コウツをカンする場合とのかねあいで、この待ち形にすると「不要枚数」が若干修正できる。<br>
・通常、頭は比較的流動的であり、少なくとも途中まで３４５５等の形であることも多く、その段階までは「頭１つ待ち」と捉えることができる。<br>
<br>
<br>
<br>
<font color="#FFFF00" size="6">基礎理論計算：</font><br>
<br>
<br>
<font color="#FF9955">１）ある１９牌が他家のシュンツに不要な枚数の計算</font><font
color="#0000FF"><br>
</font><font color="#00FFFF">（８４−ｎ　通りの場所から　１２−Ｔ　通りのメンツを作る）<br>
<br>
使用個数　余り個数　　　　　そのような組み合わせになる確率　　　　　　　　　その場合の他家に不要な牌平均数<br>
　　０　　　　　　４　　　　Comb(12-Ｔ、0)×(80-n/84-n)^(12-T)×(4/84-n)^0　　　　　　　　　左の式×４<br>
　　１　　　　　　３　　　　Comb(12-Ｔ、1)×(80-n/84-n)^(11-T)×(4/84-n)^1　　　　　　　　　左の式×３<br>
　　２　　　　　　２　　　　Comb(12-Ｔ、2)×(80-n/84-n)^(10-T)×(4/84-n)^2　　　　　　　　　左の式×２<br>
　　３　　　　　　１　　　　Comb(12-Ｔ、3)×(80-n/84-n)^(9-T)　×(4/84-n)^3　　　　　　　　　左の式×１<br>
　　４　　　　　　０　　　　Comb(12-Ｔ、4)×(80-n/84-n)^(8-T)　×(4/84-n)^4　　　　　　　　　　　　０<br>
</font><font color="#0000FF"><br>
<br>
</font><font color="#FF9955">１’）ある２８牌が他家のシュンツに不要な枚数の計算</font><font
color="#0000FF"><br>
</font><font color="#00FFFF">（８４−ｎ　通りの場所から　１２−Ｔ　通りのメンツを作る）<br>
<br>
使用個数　余り個数　　　　　そのような組み合わせになる確率　　　　　　　　　その場合の他家に不要な牌平均数<br>
　　０　　　　　　４　　　　Comb(12-Ｔ、0)×(76-n/84-n)^(12-T)×(8/84-n)^0　　　　　　　　　左の式×４<br>
　　１　　　　　　３　　　　Comb(12-Ｔ、1)×(76-n/84-n)^(11-T)×(8/84-n)^1　　　　　　　　　左の式×３<br>
　　２　　　　　　２　　　　Comb(12-Ｔ、2)×(76-n/84-n)^(10-T)×(8/84-n)^2　　　　　　　　　左の式×２<br>
　　３　　　　　　１　　　　Comb(12-Ｔ、3)×(76-n/84-n)^(9-T)　×(8/84-n)^3　　　　　　　　　左の式×１<br>
　　４　　　　　　０　　　　Comb(12-Ｔ、4)×(76-n/84-n)^(8-T)　×(8/84-n)^4　　　　　　　　　　　　０<br>
</font><font color="#0000FF"><br>
<br>
</font><font color="#FF9955">１’’）ある３〜７牌が他家のシュンツに不要な枚数の計算</font><font
color="#0000FF"><br>
</font><font color="#00FFFF">（８４−ｎ　通りの場所から　１２−Ｔ　通りのメンツを作る）<br>
<br>
使用個数　余り個数　　　　　そのような組み合わせになる確率　　　　　　　　　その場合の他家に不要な牌平均数<br>
　　０　　　　　　４　　　　Comb(12-Ｔ、0)×(72-n/84-n)^(12-T)×(12/84-n)^0　　　　　　　　　左の式×４<br>
　　１　　　　　　３　　　　Comb(12-Ｔ、1)×(72-n/84-n)^(11-T)×(12/84-n)^1　　　　　　　　　左の式×３<br>
　　２　　　　　　２　　　　Comb(12-Ｔ、2)×(72-n/84-n)^(10-T)×(12/84-n)^2　　　　　　　　　左の式×２<br>
　　３　　　　　　１　　　　Comb(12-Ｔ、3)×(72-n/84-n)^(9-T)　×(12/84-n)^3　　　　　　　　　左の式×１<br>
　　４　　　　　　０　　　　Comb(12-Ｔ、4)×(72-n/84-n)^(8-T)　×(12/84-n)^4　　　　　　　　　　　　０</font><font
color="#0000FF"><br>
<br>
<br>
<br>
</font><font color="#FF9955">２）ある牌が他家のコウツに使用され、不要な個数が減少する平均個数の計算</font><font
color="#0000FF"><br>
</font><font color="#00FFFF">（３４−ｍ　通りの場所から、　Ｔ　通りのコウツを作る）<br>
<br>
「コウツづくりに諦められた牌」の場合<br>
他家に不要な個数は　０　個減少する（減少しない）。<br>
<br>
「コウツづくりの場所になり得る牌」の場合<br>
T/34-m　の確率で　他家に不要な個数が３減少すると考えて、3Ｔ/(34-ｍ)　個　減少する。</font><font
color="#0000FF"><br>
<br>
<br>
<br>
</font><font color="#FF9955">３）ある特定の牌が他家の頭候補（１牌）に使用され、不要な個数が減少する平均個数の計算</font><font
color="#0000FF"><br>
</font><font color="#00FFFF">3/34＝0.08824個。</font><font
color="#0000FF"><br>
<br>
<br>
<br>
</font><font color="#FF9955">４）あるシュンツ部分がＫ家（０＜Ｋ＜３）に諦められたことによる、諦められたシュンツ構成牌の余る個数の増加分の計算</font><font
color="#0000FF"><br>
</font><font color="#00FFFF">ある特定の牌に対し、本来３家で使用して余りがＸになるとして、３家が必要とするのは４−Ｘ枚。<br>
それを３−Ｋ家しか必要としないので、増加分は<br>
Ｋ（４−Ｘ）／３　個　である。<br>
（ここの計算は注意を要する。後に記述する）<br>
</font><font color="#0000FF"><br>
<br>
<br>
</font><font color="#FF9955">以上の　１）〜４）　の計算を単純に加え合わせれば良い。</font><font
color="#0000FF"><br>
</font><font color="#FFFF80">これが「ある数牌が他家に不要な平均枚数」を表す。<br>
理論上明らかなとおり、（４−この値）が、他家が使用する平均個数である。</font><font
color="#0000FF"><br>
<br>
<br>
<br>
</font><font color="#FF9955">５）王牌に使用される牌の減少分の計算</font><font
color="#0000FF"><br>
</font><font color="#00FFFF">王牌も仮想の「他家」として、１３枚の（ドラ表示牌を除いた）牌をランダムに使っていると捉えれば良いのである。</font><font
color="#00FFFF" size="1">おれ天才すぎ(爆)</font><font
color="#00FFFF"><br>
とすると、ランダムに、全ての牌が13/136の確率で使われているから、ある特定の牌が王牌に使用されることで減少する「他家・王牌に不要な個数」は、次のように補正できる。<br>
<br>
王牌が使用する個数　　　　　　　　　　　　　　　その確率　　　　　　　　　　　　　　　　　　　　　　減少個数期待値<br>
　　　　　０　　　　　　　　Comb（4,0）×(123/136)×(122/135)×(121/134)×(120/133)　　　　　　　　　　０<br>
　　　　　１　　　　　　　　Comb（4,1）×(123/136)×(122/135)×(121/134)×(13/133)　　　　　　　　　0.28855<br>
　　　　　２　　　　　　　　Comb（4,2）×(123/136)×(122/135)×(13/134)×(12/133)　　　　　　　　　　0.08585<br>
　　　　　３　　　　　　　　Comb（4,3）×(123/136)×(13/135)×(12/134)×(11/133)　　　　　　　　　　
0.00774<br>
　　　　　４　　　　　　　　Comb（4,4）×(13/136)×(12/135)×(11/134)×(10/133)　　　　　　　　　　　0.00021<br>
　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　合計　0.38235<br>
<br>
王牌１３枚中、３４種類のうちの特定の牌は平均　0.38235個使用されることになる（＝13/34）。</font><font
color="#0000FF"><br>
<br>
<br>
<br>
</font><font color="#FF9955">以上の　１）〜５）　の計算を単純に加え合わせれば良い。</font><font
color="#0000FF"><br>
</font><font color="#FFFF80">これが「ある数牌が他家に不要で、かつ王牌にもない平均枚数」（要するに、他家がまっすぐテンパイに向かった場合に、自分の手牌にあるか、または河に捨てられる平均枚数）を厳密に表す。</font><font
color="#0000FF"><br>
<br>
</font><br>
<br>
<font color="#FFFF00" size="6">実戦への応用及び他の研究のための付記：</font><br>
<br>
<font color="#00FF80">シュンツを諦める場合の　ｎ　の評価について</font><br>
<br>
シュンツ構成を諦める部分（ｎ）の判定は、このモデルを実戦に応用する場合に有用な因子となるだろう。<br>
しかしながら、<font color="#FF9955">理論計算上では、現段階では　ｎ＝０　とするのが適当</font>である。<br>
例えば３家によって　２３４　が１セット、場に出た場合。これは　２３４　のメンツが諦められたと言えるだろうか？<br>
そうではない。<br>
東家は、２２３４と持っていて２を、南家は２３３４と持っていて３を、西家は２３４４と持っていて４を捨てたのかもしれない。<br>
では、序盤に１が４枚切れた場合、１２３のシュンツは諦められただろうか？<br>
私が実戦で打つ場合は、１が４枚出れば２を１に、３を２にして考えており、これは妥当だと思われるが、理論計算上ではこれらを含むことの是非は未判定とする。特に中盤以降に４枚目が出た場合などは、２３の形を整理するひまがないことも多いはずだ。<br>
<font color="#FF9955">要するに「諦めた」というのは、「そこにシュンツができないこと」を示すのではなく、「ある他家がそこにシュンツを作らないと決めた」ことを意味する</font>のである。だから「３を自分が４枚持っているから３４５はない」という考えは全く見当はずれになる。<br>
他家の意志が介在する以上、演繹的な方法でこれを判断することは不可能であり、統計的に実戦からデータを得るしかないであろう。<br>
<br>
<font color="#00FF80">コウツづくりに諦められた牌　ｍ　の評価について</font><br>
<br>
ｎ　があいまいな、他家の性質に強く依存する指標であったのに対して、こちらは比較的明確な指標である。<br>
「コウツづくりに諦められた牌」とは、具体的に次のような牌である。<br>
<font color="#FF9955">・ポンされた牌<br>
・３枚切れた牌（もしここにコウツを作ろうとしても、必ず他にそれ以上有効な牌が存在する）</font><br>
その他にも考え得るが、これだけで実戦に充分使えるものと思われる。<br>
<br>
<font color="#00FF80">全コウツ数　Ｔ　の評価について</font><br>
<br>
<font color="#FF9955">一般に、一つの牌がポンされた時点で　Ｔが１増加する（この際ｍも１増加する）</font>。<br>
<font color="#FF9955">他には例えば、点数状況などから、一人がトイトイをしており、他が通常のシュンツ手とわかっている場合では　Ｔ＝４。<br>
また、このモデルではチートイを考慮していないが、近似的に　Ｔ＝４　として良いと考えられる。</font><br>
通常手を作っている場合にも、２２３　７８　等の１シャンテン形からアンコになることはあり得る。<br>
また、ヤクハイをポンした後は、仮にヤクハイのみの通常手であっても、ポン材を残す傾向が強いと言える。<br>
ある仕掛けに対して　Ｔ　がどの程度になるかは、実戦からデータを取るしかないが、私のこれまでの対局から感覚的に妥当と思われるラインは、<br>
ヤクハイ２ポン仕掛け　に対して　Ｔ＝３<br>
２ポン仕掛け　に対して　Ｔ＝４<br>
染め手仕掛け　に対して　Ｔ＝２<br>
ヤクハイ１ポン仕掛け　に対して　Ｔ＝２<br>
通常のメンゼン手　に対して３家合計で　Ｔ＝０〜１<br>
程度ではなかろうか。<br>
<br>
<font color="#00FF80">全般</font><br>
<br>
上ランなどで、比較的早い順目に、例えば７が４枚出てしまった場合など、ここは「壁」になる。<br>
故に、シュンツ候補として５６７や６７８、７８９はなくなる。６は９と同じ「余り牌数」の計算になる。<br>
相手がしっかり場を見ているという前提の下、初めて　ｎ　の値が応用できることになる。<br>
<br>
その他、各種の計算の数理的意味付けをはっきり理解しておかなければ、とんでもない誤算をするので注意(笑)。<br>
<br>
<br>
<br>
<font color="#FFFF00" size="6">本文を基礎とした、今後の研究課題：</font><br>
<br>
もし「麻雀学」という学問があるならば、このモデル化は一番最初にされた偉大な業績であろう(笑)。<br>
今後、このモデルで具体的にＴ、ｍ・・・を定めて、実際の残り牌数を計算するという課題を残している。<br>
基本的な場合として<br>
・１人がヤクハイ仕掛け<br>
・２人がヤクハイ仕掛け<br>
・１人がトイトイ仕掛け<br>
・１人がトイトイ・１人がヤクハイ仕掛け<br>
・１人がホンイツ仕掛け<br>
くらいのデータをそのうち出します。<br>
「トイツ場」の存在証明も副産物として出しますわ。<br>
他にも<br>
・相手がある牌（特にヤクハイなど）を持っている確率が高いか、山に残っている確率が高いかの判定法<br>
　（通れば３割方１位、通らなければ３位、というようなヤクハイについて、相手が持っている確率が何割以上なら勝負、とかね）<br>
・任意の「待ち」の良し悪しの定量研究<br>
・他家リーチが必要とする牌の分析<br>
などが考えられるね。<br>
ん〜、研究進むなぁ(笑)。<br>
<br>
<br>
<br>
<br>
<br>
<br>
<embed src="tamsp01.mid" hidden="true" align="baseline"
border="0" width="1" height="1" autostart="true" loop="true"
repeat="true"><noembed><bgsound src="tamsp01.mid" loop="infinite"></noembed> </p>
</body>
</html>
