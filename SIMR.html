<html>

<head>
<meta charset="UTF-8">
<meta name="GENERATOR" content="Microsoft FrontPage Express 2.0">
<title>SIMRateの説明</title>
</head>

<body bgcolor="#F4BDBD">

<p><font size="7"><strong><img src="DEKISU2.gif" width="32"
height="32">Ｒ変動シミュレータ「SIMRate」の説明</strong></font><br>
<br>
Ｒの変動や分布の研究のための強力な内蔵ツール「SIMRate」について説明します。<br>
何百万試合にも及ぶ「試合」を、モンテカルロシミュレーションの手法を用いて、ほんの数秒でこなすことができます。<br>
実際にSIMRateを起動すれば「ヒント」が表示され、簡単な使い方についてはそれで充分理解できるものと思いますので、このマニュアルには、シミュレータの機能・特長紹介と具体的なパラメータの指定テクニック、そして技術的な情報を記述します。<br>
<br>
<img src="DEKISU4.gif" width="765" height="539"><br>
<br>
<br>
<font size="7"><strong><img src="DEKISU2.gif" width="32"
height="32"></strong></font><font size="5"><strong>SIMRateを使って、例えばこんなことができます（機能紹介と特長）</strong></font><br>
<br>
<strong>・目標Ｒ達成確率を求める</strong><br>
あと何試合以内に、目標のＲに到達できるかなあ？　などの疑問に対し、一瞬の超高速演算で解答を与えます。<br>
<br>
<strong>・Ｒの分布を調べる</strong><br>
Ｒは、どのように分布するのか？　麻雀の「実力」が「はっきり違う」と言えるのは、どの程度離れたＲからか？<br>
こういった疑問に、直感的な意見なら、これまでたくさん──本当にたくさん──語られてきました。<br>
このツールは、どんな直感よりも最も高速に、最も合理的に、そして最も正しく正解を導くでしょう。<br>
<br>
<strong>・最高到達Ｒ・最低到達Ｒを求める</strong><br>
試合数と安定Ｒ、現在のＲから、あと何試合打つ場合に、果たして最高でどのくらいのＲを出せるのか？　またついてない場合にどこまでＲが下がり得るのか？　そういったことをシミュレートできます。<br>
<br>
<strong>・Ｒが安定する試合数を求める</strong><br>
400試合を超えると「安定期」と言われることが多いですが、本当に400試合が「安定期」でしょうか？<br>
Ｒが安定期に入る試合数を、合理的に求めることができます。<br>
<br>
<strong>・その他様々な解析</strong><br>
パラメータの工夫次第で、様々な研究を行うことができます。<br>
<br>
<strong>・とても高速です<br>
</strong>以上のようなシミュレーション（何百万試合にも及ぶ「試合」）を、ほんの数秒でこなすことができます。<br>
<br>
<strong>・ヒマツブシにも研究にも最適です</strong><br>
「適当にいじってみる」ような状態でパラメータを不都合な値に設定しても、安全機能によって、エラーにはなっても深刻な現象は起きません（せいぜい、シミュレートが失敗する程度です）。しかし、研究するために安全機能を外してパラメータを操作することも可能です。ユーザの目的による自由度が高い、使いやすいソフトです。<br>
<br>
<br>
<font size="7"><strong><img src="DEKISU2.gif" width="32"
height="32"></strong></font><font size="5"><strong>使い方の具体例</strong></font><br>
<br>
<font size="3"><strong>「とりあえず今までの1000試合の集計をした。今後100試合打つと、Ｒはどのくらいになるだろう」</strong></font><br>
実際に集計し、集計結果の画面からSIMRateを起動すると、安定Ｒと（最後の試合から予想される）初期Ｒが、「現在の値」として設定されます。<br>
だから、集計した直後になら、そのまま１セット当たりの試合数を変えるだけで（この場合100に）、簡単に「自分のＲの変動予測」をたてることができます。<br>
同じように、「目標Ｒ」として条件０にＲを指定すれば、その目標Ｒを達成するためにあと何試合くらいかかるかがすぐにわかります。<br>
<br>
<font size="3"><strong>「実力Ｒ1800なのだが、不調で1750まで下がってしまった、200試合打ったらどのくらいまで回復するかな？」</strong></font><br>
初期Ｒ1750、実力1800に設定します。<br>
１セット当たりの試合数を200に、セット数を1000にします。<br>
シミュレートすると、下の欄に「セット終了時Ｒ平均」が出るはずです。<br>
これが求めたい値です。<br>
<br>
<font size="3"><strong>「Ｒ2000を超えた。まだ実力は1950だが、現在のＲは2020。あと何試合くらいＲ2000台でいられるか？」</strong></font><br>
初期Ｒ2020、実力1950に設定します。<br>
条件１で「試合数0以上、Ｒ2000以下」にします。<br>
１セット当たりの試合数を1000に、セット数を1000にします。<br>
これでシミュレートすると、「条件１抵触時試合数」として、目的の値を知ることができます。<br>
ただし、条件に抵触せず1000試合終わった場合が（もし）あれば、その分も計算に含めて下さい。<br>
<br>
<font size="3"><strong>「現在のＲが1980。実力はＲ1900だが、あと50試合のうちに、Ｒ1950を切る前にＲ2000に到達する確率を調べたい」<br>
</strong>初期Ｒ1980、実力1900に設定します。<br>
条件０で「Ｒ2000以上」にします。<br>
条件１で「試合数0以上、Ｒ1950以下」にします。<br>
１セット当たりの試合数を50に設定します。<br>
こうして、「条件０抵触回数」や「条件１抵触回数」、また、条件に抵触せず終了した回数を調べることで、目的の確率を求めることができます。<br>
</font><br>
<font size="3"><strong>「第一で、400試合Ｒ2600の人を見た。これはイカサマだろうか？」</strong></font><br>
第一では、安定Ｒ2150にも及ぶ人は存在しません。そこで、第一で可能な安定Ｒの「上限」を2150としましょう。<br>
その上で、初期Ｒ1500、実力2150とし、１セットあたり400にしてシミュレートを行います。<br>
1000セットでの最高到達Ｒを見て下さい。まず、2600には到達していないはずです。<br>
この段階で「イカサマ」と合理的に結論づけても良いですが、たまたま1000人に１人程度の割合で起こる「幸運」に恵まれたのかもしれない、と良心的に解釈し、100000セットくらい調べてみます。100000セット調べても１度も到達できない水準であれば、完全に「イカサマです」と主張することができるでしょう。そのような水準になれば、疑うことが当然であって、むこうが「イカサマでない証拠」を出さなければならないでしょう。<br>
ところで通常使用の場合、「セット数」「セットあたりの試合数」は1000までしか指定できませんが、こうした研究のために、それ以上の値を指定する方法も用意しています。興味のある方は、「研究用オプション」に記載されているのでご覧下さい。<br>
<br>
<br>
<font size="7"><strong><img src="DEKISU2.gif" width="32"
height="32"></strong></font><font size="5"><strong>技術的な情報</strong></font><font
size="3"><br>
<br>
<strong>中断条件のデフォルトについて</strong><br>
中断条件は、基本的には、デフォルトの状態のままにしておけば「条件を指定しないこと」とほぼ同等の役割を演じます。<br>
通常のシミュレーションにおいてはほぼあり得ないような条件が、あらかじめの「条件」として設定されているためです。<br>
実際に使いたい条件の部分の値だけを変えれば、通常は望み通り動作するでしょう。<br>
<br>
<strong>中断条件に抵触して中断されたセットの、データに与える影響　</strong></font><font
color="#FF0000" size="5"><strong>★重要★</strong></font><font
size="3"><br>
中断条件に抵触してセットを中断した場合、そのセットはデータ「最高到達Ｒ」や「最低到達Ｒ」に記録されません。<br>
「セット終了時平均Ｒ」にも集計されません。<br>
ただし、データ「Ｒの単純な分布」には、中断する直前のデータまでが残ります。<br>
例えば「Ｒ2000超えたら中断」であっても、直前のＲ1998などは記録されます。<br>
また「トータル試合数」は、「こなした試合数」を表すので、中断した場合でもその瞬間の対戦までしっかり記録されます。<br>
分析にあたっては、このような、誤解の生じやすい中断の際のデータへの影響について、正しい理解が望まれます。<br>
<br>
<strong>SIMRateのシミュレーション原理について<br>
</strong>疑似乱数を発生させ、これを用いて「実験」を行う手法がモンテカルロシミュレーションです。<br>
SIMRateでは疑似乱数を用いて、実力Ｒから計算したある割合で「順位」を取り出すことによって、シミュレーションを行っています。<br>
疑似乱数の発生には、ANSI Cで定められたrand関数（一様分布）と同等の結果をもたらす関数を用いています。乱数の種はPCの時刻から取っています。<br>
<br>
<strong>Ｒの変動方法について　</strong></font><font
color="#FF0000" size="5"><strong>★重要★</strong></font><font
size="3"><br>
内部処理的には、他家平均Ｒは1500で固定し、それに対する「安定Ｒ」の人の勝率で、「順位」を決定してＲを変動させています。<br>
これは計算量を減らすためです。<br>
Ｒの変動の期待値は結局同じなので、少なくない試合数に対する結果は正確ですが、極端に少ない試合数に対しては誤差が生じます。<br>
充分注意して下さい。<br>
<br>
<strong>順位の決定方法について　</strong></font><font
color="#FF0000" size="5"><strong>★重要★</strong></font><font
size="3"><br>
順位の決定方法ですが、本来、ある実力Ｒに対して１位・２位・３位・４位がある分布をするのに対し、このシミュレータでは「1.5位率」と「3.5位率」を算出し、各々を実力に対応するある割合で取り、その中で半々で１位または２位・３位または４位を取るような動作を行っています。従って、Ｒ1500の相手に対して平均順位1.5位以上とか、3.5以下の実力を出す人に対して、シミュレーションのデータは全く保証されません。<br>
また、前項の事情と、この事情の双方の影響で、極端に少ない試合数を１セットとしてデータを取ることは誤差を大きくします。<br>
例えば「５試合・1000セットの間に変動するＲ」等は、正確には出ないと思われます。<br>
目的によりますが、１セットあたり20〜30試合程度になれば、通常は問題ないと考えられます。<br>
<br>
<strong>SIMRate　v3.0〜v3.3の計算について　</strong></font><font
color="#FF0000" size="5"><strong>★重要★</strong></font><font
size="3"><br>
SIMRateは、v3.0〜v3.3のバージョンにおいて、場合によっては致命的な結果を引き起こすバグが発見されましたゞ(´▽｀；)<br>
最高Ｒ到達試合数の集計で240試合の近辺に特異点が現れる現象がそれです。<br>
また、Ｒ分布についても同じ原理の挙動を起こします。<br>
単純な、小数の切り捨てのミスだったのでv3.4では修正されています。<br>
論文のデータはv3.0より以前のバージョンを用いており、この影響はありません。<br>
<br>
<br>
</font><font size="7"><strong><img src="DEKISU2.gif" width="32"
height="32"></strong></font><font size="5"><strong>研究用オプション</strong></font><font
size="3"><br>
<br>
<strong>セットあたりの試合数・セット数の、研究のための指定について</strong><br>
通常使用の状態では、双方ともに1000までの値を取ることが許可されています。これ以上の値を指定しても最大値に切りつめられます。<br>
問題はメモリリソース圧迫ではなく、主として実行時間にあり、「気軽にいじるだけの」ユーザに負担をかけないためです。<br>
しかしもちろん、主に研究を目的とした用途では「一万試合を１セットにしたい」場合などもあるはずです。<br>
そこでそのような値を指定する方法を用意しています。<br>
「研究用キー」の欄に、半角で「<strong>sysma</strong>」または「<strong>research</strong>」という単語を入れて下さい（大文字小文字の区別はありません）。<br>
こうしておくことで、セットあたりの試合数・セット数共に、1000を超える値を用いることができるようになります。<br>
この方法によって、各々の値はメモリリソースの許す限りの値まで取ることが可能になります（例えばとつの環境で、1000万試合×10セット、１億試合分のシミュレートを行うことは可能でした）。<br>
ただし、研究目的以外でこの機能を使用することは推奨しません。<br>
5000*5000のサイズにおいてさえ、とつげき東北の環境（CPUはPentium2-450Mhz）でシミュレートに30秒以上かかりました。<br>
思慮なく大きな値にすると、莫大な時間がかかる上、ある種の変数の値が、取り得る範囲を超えてエラーを起こす可能性などもあります。片方が大きな値を持つ時は、もう片方を小さくするなど、研究の目的に応じて工夫する必要があるでしょう。<br>
タスクは実際の試合数（セット当たりの試合数×セット数）に比例します。<br>
<br>
<strong>前回の結果と次の結果を合算で表示するための指定について</strong><br>
同様に、「研究用キー」の欄にオプションを指定します。<br>
半角で「<strong>chain</strong>」（大文字でも可）と記入しておくと、前回の結果がクリアされません。<br>
なお、チェックは厳密でないので、「sysmachain」などと（スペースを入れず）連続にしても構いません。順も不同です。<br>
要は、研究用キーの欄に、その文字列が入っていれば良いのです。<br>
ただし、起動して初めてのシミュレーションで「chain」オプションを付けると、データが不正になりますので必ず初めは普通にシミュレートする必要があります。<br>
また言うまでもないことですが、求める値の性質によっては、ある結果と、その半分の試合数で２回合算した結果とが、必ずしも理論的に等価にならない場合があります。研究をしようとしているレベルの人に対してですから、これ以上は説明しませんが、くれぐれもそういった初歩的な誤謬を犯さないよう細心の注意を払いましょう。<br>
<br>
<br>
<br>
<br>
<br>
<br>
</font></p>
</body>
</html>
