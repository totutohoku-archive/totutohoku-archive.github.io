<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>

<head>
<meta charset="UTF-8">
<META name="GENERATOR" content="IBM HomePage Builder 2001 V5.0.0 for Windows">
<title>システマティック麻雀工学</title>
</head>

<BODY background="1052.gif" alink="#ff7f00" bgcolor="#e0e0e0" link="#ff0000" text="#000000" vlink="#400080">
<P>システマティック麻雀工学：<FONT size="+3"><B><BR>
２：他家必要牌のモデル化理論と実装（MJ-1）</B></FONT><BR>
<BR>
<A href="http://www.amazon.co.jp/exec/obidos/ASIN/4061497650/sml-22"><IMG src="kagakusuru.jpg" width="72" height="120" border="0"></A><FONT color="#FF0000"><SCRIPT type="text/javascript"><!--
google_ad_client = "pub-0849366231331886";
google_ad_width = 728;
google_ad_height = 90;
google_ad_format = "728x90_as";
google_ad_type = "text_image";
google_ad_channel ="";
//--></SCRIPT> <SCRIPT type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</SCRIPT> <BR>
</FONT><BR>
<BR><B><FONT size="+1">他家必要牌（当たり牌）の計算と待ち読み：</FONT></B><BR>
<BR>
前回、充分に高精度で他家の必要メンツを特定するルーチン（MJ-0）が一応動く形となった。<BR>
もちろん様々な特殊状況にはまだ対応していないし、染め手率などのパラメータも求まっていないが、「通常の状態（つまり多くの状況）で、人間と同等かそれ以上に精確に他家の必要メンツを求める」ことはできるようになった。<BR>
他家の手の構成メンツが人間と同等かそれ以上に精確に「読める」ということは、他家の最後に必要とする牌（いわゆる当たり牌）についても同レベルの読みができるということである。<BR>
というのも、他家の構成メンツを構成する牌のうち一つが「当たり牌」になるわけだからだ。そのメンツから１牌（当たり牌）を除けば、「待ちの形」がわかる。<BR>
<BR>
<FONT size="+1"><B><BR>
単純な「当たり牌モデル」の提案：</B><BR>
</FONT><BR>
他家はMJ-0によって計算されるようなメンツを作る。<BR>
他家は、それらのメンツ（と頭）を構成する牌のうちの１つを最終的なテンパイ形で待つ。<BR>
その際、当人が既に場に切った牌や、リーチ後に通った牌を、待ち牌や、もう片方の待ち牌にすることはない。<BR>
なお、待ちがカンチャン５になったらリーチしないが４７待ちになったらリーチする、のように、「好形への変化」をさせるパラメータは後に導入する。<BR>
MJ-0モデルに、上記の単純な条件を導入して「当たり牌読みのためのモデル」が作られるだろう。<BR><BR>
計算の手順<BR>
１）前述のモデルで論じられた方法で「他家の構成メンツの一例」を出す。<BR>
２）そのメンツからランダムに１牌を抜き取る<BR>
３）残ったターツがもし、その他家の捨て牌やリーチ後の現物牌によってメンツになるなら、２）に戻る<BR>
４）そのターツがメンツになり得るような牌を「待ち牌」とする。<BR>
５）ただし他のメンツとの連関も考慮する（３面待ち、コウツの場合のシャンポン待ちなど）<BR>
６）１～５を充分な回数繰り返し、ある牌が待ちになっている可能性を計算する。<BR><BR>
ここで、テンパイの待ち形は、必ずしも牌の組み合わせだけでは表せない。<BR>
ドラを使おうとすると愚形になるし、普通はカンチャンよりリャンメンを残そうとするものだ。<BR>
MJ-0によるメンツ構成モデルは、完成メンツの構成を推測するものであって、「最後に残ったメンツ」の候補、つまり当たり牌の待ち方までを充分考慮したものではない。<BR>
<BR><BR>
<FONT size="+1"><B>当たり牌読みプログラム「MJ-1」の実装：</B></FONT><BR><BR>
上のアルゴリズムに従っただけの単純な待ち読みプログラムを作った。<BR>
このプログラムを以後、MJ-1と呼ぶ。<BR>
ただし、MJ-1は計算速度を上げるために上の（６）を省略した。MJ-0によってメンツ構成が5000個作られ、その各々１つから、待ちがただ１種類だけ作られる。したがって読まれた待ちの種類はのべ5000個だけである。<BR><BR><BR>
<FONT size="+1"><B>MJ-1の読み能力の評価：</B></FONT><BR><BR>
このモデルが、実際の麻雀における他家の当たり牌を的確に読めているかどうかを検証する。方法は、「当たり牌の予測」を用いる。<BR>
<BR>
手順<BR>
１）MJ-1による推測<BR>
あるプレイヤーから見た「状況」を、MJ-1に与える。MJ-1は、指定された他家の危険牌を、危険な順に８つ指定する。<BR>
<BR>
２）人間による推測<BR>
シスマの技術員やアンチシスマメンバーなど、超ラン常勝組メンバーを含む比較的ハイレベルな打ち手に、同様の状況で同じ危険牌指定をしてもらった。<BR>
参加者：　モ娘。なっち　雀鬼百瀬　疾駆★白馬　ＢＪ　激弱なんし　散る桜ゆえ　【最終兵器】　北海の真剣師　鮫町民　まこちょ<BR>
　　　　　　シレン　黒い三等兵　無茶苦茶です　みずか　ｒｏｒｏ　紅孔雀さん　koichicurry　ドラゴン丸　新庄直樹　BONY　しろたまご<BR>
　　　　　　神龍★悪魔　WAve-Model　平成㍑にの　最後の麻雀　美奈☆碧彗星　ミカエル　楓那　姫鈴☆茜彗星　邪眼　nanasy<BR>
　　　　　　燕☆空彗星　３翻４０符　たすけ　少年N　匿名ｷｰﾎﾞｰ　カマセン　某人（匿名某超ラン常勝メンバー）　氷　(￣(●●)￣)<BR>
　　　　　　かんみね　key★けろぴ-　天意無法　亜凹　れ～もん　keiichixx　noair　ワンサ　pesan　Spa☆Miesque　uoysiadino<BR>
　　　　　　まうっち　負け犬＠なま　くろっさん　モ娘。かほり　おいも　スリルリアル　♪桜まゆみ♪　和也超合金Ｆ　神野<BR>
　　　　　　ひょうろく玉　☆夢人☆　☆若菜☆　KeiichiS　心ない天使　神龍★獣冴　＄太守＄　すいそ　へたれ雀士<BR>
<FONT size="-1">※ご協力いただいたみなさま、ありがとうございました。</FONT><BR>
<BR>
３）実際の状況の設定<BR>
とつげき東北の実戦の牌譜から、適当に状況を取り出す。<BR>
特殊な待ちばかりが選ばれなうようにだけ注意しつつ、牌譜から適当に取り出し、７人分の待ち牌を予想してもらった。<BR>
<BR>
４）推測精度の比較<BR>
MJ-1の当たり牌予測と人間の推測の精度を各々評価する。<BR>
指定された８牌のうち、実際の当たり牌であったものに、指定された優先順位に従って点数を加点する（８点、７点、・・・、１点）。全て外れたら１点減点する。<BR>
<BR>
<B>（参加者71名、91点満点）</B><BR>
　　　　　　　　　　　　　　　<B>得点合計</B>　（うちリャンメン待ち時スコア）<BR>
待ち読み人間Ｅ　　　　　　　　52点　　　　　　　　　39　　　　　　　（カマセン）<BR>
待ち読み人間37　　　　　　　 50点　　　　　　　　　39　　　　　　　（へたれ雀士）<BR>
待ち読み人間Ｊ　　　　　　　　49点　　　　　　　　　46　　　　　　　（散る桜ゆえ）<BR>
待ち読み人間Ｃ　　　　　　　　48点　　　　　　　　　40<BR>
<B>MJ-1（computer代読）　 47点　　　　　　　　36　　　　　</B><BR>
待ち読み人間18　　　　　　　 47点　　　　　　　　　34<BR>
待ち読み人間00　　　　　　　 47点　　　　　　　　　34<BR>
待ち読み人間34　　　　　　　 47点　　　　　　　　　33　　　　　<BR>
待ち読み人間Ｍ　　　　　　　 47点　　　　　　　　　32　　　<BR>
待ち読み人間06　　　　　　　 44点　　　　　　　　　36<BR>
待ち読み人間Ｖ 　　　　　　 　43点　　　　　　　　　32<BR>
待ち読み人間 Ｉ　　　　　　　　42点　　　　　　　　　33　　　<BR>
待ち読み人間36　　　　　　 　42点　　　　　　　　　31<BR>
待ち読み人間27　　　　　　　 42点　　　　　　　　　28<BR>
待ち読み人間Ｂ　　 　　　　　 41点　　　　　　　　　35<BR>
待ち読み人間37　　　　　　　 40点　　　　　　　　　24<BR>
待ち読み人間Ｑ　　　　　　　　39点　　　　　　　　　31　　　<BR>
待ち読み人間Ａ 　　　　　　 　39点　　　　　　　　　24<BR>
待ち読み人間38　　　　　　　 38点　　　　　　　　　37<BR>
待ち読み人間10　　　　 　　　38点　　　　　　　　　33<BR>
待ち読み人間X　　　　　　　　38点　　　　　　　　　25<BR>
待ち読み人間Ｕ　　　　　　　　37点　　　　　　　　　32　　　　　<BR>
待ち読み人間20 　　　　　　　36点　　　　　　　　　26　　　　　<BR>
待ち読み人間12　　　 　　　　35点　　　　　　　　　32　　　　
<BR>
待ち読み人間35　　　　　　　 35点　　　　　　　　　32<BR>
待ち読み人間17　　 　　　　　35点　　　　　　　　　25　　　　<BR>
待ち読み人間Ｇ　　　　　　　　34点　　　　　　　　　24　　　　　<BR>
待ち読み人間33　　　 　　　　33点　　　　　　　　　28　　　　　<BR>
待ち読み人間09　 　　　　　　33点　　　　　　　　　24<BR>
待ち読み人間01 　　　　　　　33点　　　　　　
　　 15<BR>
待ち読み人間Ｈ　　　　　　　　32点　　　　　　　　　28　　　　　<BR>
待ち読み人間08 　　　　　　　32点　　　　　　　　　28　　　　<BR>
待ち読み人間21 　　　　　　　32点　　　　　　　　　25　　　　　<BR>
待ち読み人間11 　　　　　　　31点　　　　　　　　　28　　　　<BR>
待ち読み人間13 　　　　　　　31点　　　　　　　　　25　　　　<BR>
待ち読み人間Ｐ　 　 　　　　　31点　　　　　　　　　23　　　<BR>
待ち読み人間06　 　　　　　　31点　　　　　　　　　21　　　<BR>
待ち読み人間30　 　　　　　　30点　　　　　　　　　22　　　　<BR>
待ち読み人間25　　　　　 　　30点　　　　　　　　　19　　　　<BR>
待ち読み人間23　　　　　 　　30点　　　　
　　　　 18　　　　<BR>
待ち読み人間03　　　　　　　 30点　　　　　　　　　13<BR>
待ち読み人間Ｗ　　 　　　　　30点　　　　　　　　　12<BR>
待ち読み人間22 　　　　　　　29点　　　　　　　　　27　　　<BR>
待ち読み人間Ｆ　　　　　　　　29点　　　　　　　　　21　　　<BR>
待ち読み人間Ｋ　　　　　　　　29点　　　　　　　　　16　　　　　<BR>
待ち読み人間Ｎ　　　　　　　　28点　　　　　　　　　20<BR>
待ち読み人間28　　　　　　　 28点　　　　　　　　　19<BR>
待ち読み人間24 　　　　　　　27点　　　　　　　　　23　　　　　<BR>
待ち読み人間Ｒ　　　　　　　　27点　　　　　　　　　20　　　　　<BR>
待ち読み人間35　　　　　　　 27点　　　　　　　　　20　　　　　<BR>
待ち読み人間19　　　　　　 　27点　　　　　　　　　14<BR>
待ち読み人間Ｓ　　　　　　　　26点　　　　　　　　　
8　　　　<BR>
待ち読み人間Ｙ　　　　　　　　24点　　　　　　　　　25　　　<BR>
待ち読み人間Ｌ　　　　　　　　23点　　　　　　　　　19　　　<BR>
待ち読み人間07　　 　　　　　23点　　　　　　　　　19　　　<BR>
待ち読み人間15　　　　　　　 22点　　　　　　　　　20<BR>
待ち読み人間Ｄ　　　　　　　　22点　　　　　　　　　16　　　　<BR>
待ち読み人間26　　　　　　　 22点　　　　　　　　　13　　　　<BR>
待ち読み人間Ｏ　　　　　　　　21点　　　　　　　　　18　　　　<BR>
待ち読み人間36　　　　　　　 21点　　　　　　　　　10　　　　　<BR>
待ち読み人間16　　 　　　　　19点　　　　　　　　　12　　　　<BR>
待ち読み人間Ｔ　　　　　　　　19点　　　　　　　　　
8　　　<BR>
待ち読み人間02　　　　　　　 19点　　　　　　　　　
6<BR>
待ち読み人間14　　 　　　　　18点　　　　　　　　　12　　　　<BR>
待ち読み人間05　　　　　　　 16点　　　　　　　　　12<BR>
待ち読み人間29　　 　　　　　16点　　　　　　　
　　3　　　<BR>
待ち読み人間18　　 　　　　　13点　　　　　　　　　10　　　<BR>
待ち読み人間31　　 　　　　　13点　　　　　　　　　8　　　<BR>
待ち読み人間04　　　　　　　 13点　　　　　　　　　
0<BR>
待ち読み人間Ｚ　　　　　　　　12点　　　　　　　　　
6　　　　　<BR>
待ち読み人間32　　 　　　　　11点　　　　　　　　　7　　　<BR>
<BR>
コンピュータの読み能力：トータル47点（<B>偏差値65.3</B>、平均点は31.3点）。対リャンメン時36点（<B>偏差値63.3</B>、平均点は22.7点）。<BR>
<BR>
５）考察<BR>
MJ-1は単に牌の組み合わせだけを考え、ドラの種類やリーチ宣言牌、裏スジやまたぎスジ、牌の切り出し順などの情報は全く加味していないが、それにもかかわらず、<B>MJ-1は一般的なリーチやダマに対する当たり牌予測問題においてトップクラスの成績をとり、正答率の高さや誤答率の低さにおいても同様であった。その水準は、参加したほとんど全員の打ち手の「読み」能力を超えただけでなく、超ランの平均的なレベルをも充分超えたレベルであった。</B><BR>
なお、コンピュータは上記成績を「偶然」取ったというよりむしろ、的確に算出した。何度シミュレーションを繰り返しても、ほとんどこれに近い成績を収めるだろう。<BR>
人間の読みは毎回当たり外れが大きく変化することも考えに入れれば、上記結果は非常に満足できる結果と言える。<BR>
コンピュータは多くの場合この付近に位置するのに対して、今回コンピュータを越える成績を出した人間は、毎回の読みで必ずしもコンピュータを越えられるものではないと思われる。<BR>
そのことは、例えばトップの成績を収めた待ち読み人間Ｅは、ここに挙げられた人の中でとりわけ上手いわけではなく、超ランの勝ち組でもないことからも伺える。<BR>
コンピュータよりも抜群に読み能力が優れている人がいるとすれば、満点である91点近くを取る人がいてもおかしくないが、コンピュータと最優秀成績者の点差は５点であり、そのような可能性は低い。<BR>
なお、上位は超ラン常連が、下位は非超ラン常連が占める傾向にあった。<BR>
<BR>
ちなみに誤答率95％以上だった出題（一般的に見て「読みにくい」待ち）には、コンピュータもかなりでたらめな回答を示し、他の多くの人と同様減点になったが、待ち牌予想と麻雀における技術要素の性質から考えて、このことは何ら問題とはならないだろう。「読みにくい待ちをどう読むか」というような問題において、高い確率で当たり牌を読むことは非常に困難（まさに偶然）であって、その技術の差は打ち手の成績にあまり大きな影響を与えないと思われるからだ。今回の試験において高得点を取った人の多くは、しばしば誤答率が非常に高い問題で正解を出している人である。しかしこのような「得点」は決して毎回のように獲得できるものではなく、技術としてはリャンメン待ちを読む精度が高いことの方がはるかに重要だろう。<BR>
MJ-1は、特に相手がリャンメン待ちの場合に、各「無スジ牌」を危険度順に的確に並べる能力が高いと推測される。同じ「リャンメン無スジ」であっても、ある牌が当たる確率が他の1.5倍であるというような評価を下すことが可能だ。そしてそれを的確に順序付けできたからこそ、この出題に対して高い得点を上げることができたのだ（単に「この４つのスジが危ない」と予想するだけでは、高得点は望めない）。<BR>
<B>MJ-1は当たり牌予測において重要になる技術を充分に備えている</B>ことがわかる。<BR>
<BR>
MJ-1は、ある牌が当たりである確率だけでなく、その牌で放銃すると何点の出費になるかも簡単に算出できる。また、もし何らかの条件で「相手はリャンメン待ちでない」とわかっていたとすれば、それを条件に入れてリャンメン以外待ちの場合の危険度を順に高精度で挙げることができるだろう（ただしこれらはまだ実装していない）。<BR>
<B>麻雀界において初めて「テンパイ者の当たり牌は何ですか？　またそれは何点ですか？」という問題に、超ランの平均レベルよりもかなり高い精度の、明快な理論的解答を示すことができるようになった。</B><BR>
<BR>
以前からとつげき東北によって確信されていたことを繰り返し述べる。<BR>
・人間の、「様々な要因を加味した読み」「卓上のあらゆる情報を読んだ結果」は、ただの牌の数え上げにも劣る程度のレベルでしかない<BR>
・「麻雀は複雑だからコンピュータの読み能力が人間を超えられない」という発言は迷信である<BR>
（例えばMJ-0やMJ-1が東風荘の牌を読み取って計算してくれ、とつげき東北がそれを利用しながら麻雀をすれば、とつげき東北の成績は向上する）<BR>
・同様に研究が進んだとき、最も麻雀の強い人間は、そこそこ麻雀の強いコンピュータに完敗する<BR><BR>
<BR>
<BR>
<B><FONT size="+1">発展課題・待ち牌モデルによって作られる待ちと実際の待ちの違い：</FONT></B><BR>
<BR>
上記モデルの通りに待ち牌を選んでテンパイ形を作り、それをとつげき東北東風荘牌譜集計ツール「できすぎくん」に使用されているテンパイチェックルーチンに入れたところ、待ちの「リャンメン率」は53.1％であった。局開始瞬間の、全ての情報が与えられていないときで、誰も食い仕掛けを行わない場合を想定した。<BR>
一方、とつげき東北の東風実戦データの同様集計結果（01/01/28～01/11/31：Ｒ指定1900～2000平均）によると、ランダムな相手の他家リーチリャンメン率は61.2％であった。<BR>
内訳は次の通り。<BR>
<BR>
　　　　　　　　　通常リャンメン　　シャンポン　　　カンチャン　　ペンチャン　　単騎待ち　　　３種以上　　その他（ノベタンや1112）　　　計<BR>
MJ-1モデル　　1992（39.8％）　0432（08.6）　1088（21.8）　0417（08.3）　0410（08.2）　0495（09.9）　0167（03.3）　　　　　　　　　　5001<BR>
実測データ　　　0825（55.4％）　0212（14.2）　0190（12.8）　0083（05.6）　0020（01.3）　0139（09.3）　0020（01.3）　　　　　　　　　　1489<BR><BR>
このような差が生ずる。<BR>
これでは、読み方として充分な性能とはいえないかもしれない・・・かもしれないと言ったのは、実はこの程度の簡単な読みでも、充分に機能するのではないかという希望が持てるほど、世の麻雀打ちは蒙昧な経験と直感でしか麻雀を打っていないと思うからである（私自身もそれに該当するし、上に行った性能評価においてもそれを示唆する結果が出た）。<BR>
<BR>
山に残った牌を推測するという試験において、MJ-0は極めて優秀な成績を記録したわけだが、それは言うまでもなく「他家のメンツが何か」を、人間よりも精確に読めたということである。<BR>
他家のメンツの大部分の場所を精確に読めたのにもかかわらず、他家の待ち方を実際に合うほどうまくモデル化できていない要因はなんだろうか？<BR>
MJ-0によって、平均的な他家メンツ位置の推測は概ね精確に推測できているわけだから、他家メンツモデルの全体的な失敗であるよいうよりは、テンパイ近辺などで何らかの「打ち手の意思」が働きリャンメン率に8％の差が生じていると考えるのが適当だろう（平たく言えば、我々は基本的に牌効率に基づいて打っているが、東1からテンパイしていきなりカンチャン5待ち即リーチはそうそうはしないということだ）。<BR>
<BR>
「打ち手の意思」と言ってもいくつかあるが、とりわけリャンメン率を上昇させるように働く打ち方の差は、以下のようなものである。<BR>
「待ちがよくなるようにメンツ構成を選ぶ度合い（・・・13と35なら35を残す、また1と5なら5を残す、等）」<BR>
「待ちがリャンメンにならなかったときにリーチをしていない度合い（・・・4567799のシャンポンでテンパイした場合、3568を引いてリャンメン化できる、等）」<BR>
これらの要因のうちのどちらがモデルと実際のデータのリャンメン率の違いに、より多い影響を与えているのだろうか？<BR>
まず、「待ちがよくなるようにメンツ構成を考える」ということについてだが、これは要するに「メンツが完成しやすいようにメンツ構成を考える」ことと同義であって、「統計学的観点からみた、メンツの構成されやすさ」というメンツ構成のモデルの原理に既に大部分含まれていると考えて良いだろう。<BR>
一方「待ちがリャンメンにならなかったときに待ちを変えてリーチしている」ために、結果的にリーチされた場合のリャンメン率が上昇しているという説明は、とつげき東北の5000試合以上の経験から見ても、しごく妥当な考えであるし、リャンメン待ち率が高まるもっともありふれた要因だと思える。<BR>
<BR>
最終段階での待ちの変化の可能性や、その変化形を考慮することで、よりよい当たり牌予測ができるだろう。余裕があれば後に行う。<BR>
実際の使用においては、「実測のリャンメン率」と同程度のリャンメン率であると仮定して、MJ-0の予測の60％をリャンメン待ち、40％をそれ以外となるように当たり牌の組み合わせを取れば充分だろう（むしろ、その補正さえ行わない状態でも充分だと思うが）。<BR>
<BR><BR>
<BR>
<B><FONT size="+1">発展課題２・読みを鋭くさせるためのいくつかのパラメータ：</FONT></B><BR>
<BR>
リーチ宣言牌近辺、ドラ近辺の待ちが、実測においてどの程度増加するか？<BR>
役牌はどの程度優遇されるか？<BR>
<BR>
<BR>
<FONT color="#FF0000"><SCRIPT type="text/javascript"><!--
google_ad_client = "pub-0849366231331886";
google_ad_width = 728;
google_ad_height = 90;
google_ad_format = "728x90_as";
google_ad_type = "text_image";
google_ad_channel ="";
//--></SCRIPT> <SCRIPT type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</SCRIPT> </FONT><BR>
<BR>
<BR>
</P>
</BODY>
</html>
