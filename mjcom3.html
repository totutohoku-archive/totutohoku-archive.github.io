<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>

<head>
<meta charset="UTF-8">
<META name="GENERATOR" content="IBM HomePage Builder 2001 V5.0.0 for Windows">
<title>システマティック麻雀工学</title>
</head>

<BODY background="1052.gif" alink="#ff7f00" bgcolor="#e0e0e0" link="#ff0000" text="#000000" vlink="#400080">
<P>システマティック麻雀工学：<FONT size="+3"><B><BR>
３：メンゼンで和了を目指すためのルーチン</B></FONT><BR>
<BR>
<BR><B><FONT size="+1">メンゼンで和了を目指すルーチン：</FONT></B><BR>
<BR>
充分な技術を持つ和了ルーチンを開発することは、実はコンピュータにとって、「当たり牌読み」などよりも相当難しいことである。<BR>
「当たり牌読み」のように、人間の心理の読み合いレベルの低俗な話（数え上げだけで人間平均に楽勝できるような程度の技術）とは違い、実に多くの要素の見積もりと計算が必要となる。<BR>
「効率的な打ち方」は他家の構成メンツにも依存するし（ツモる牌の予想）、他家の挙動にも依存する（何順目に他家が和了してしまうか、リーチするとどの程度降りられるのか、降りた場合にどの程度その当たり牌が出にくくなるのか・・・etc）。<BR>
他家の挙動が強く介在するために、「理論化」することは非常に困難である。<BR>
そこで基本的には次のような手順（場合によっては後ろの結果をフィードバックして再構築）で研究を進める。<BR><BR>
０）アルゴリズムの基礎要素の列挙と比較<BR>
１）和了を目指すために重要な基礎要素の判断<BR>
２）その基礎要素を満足できるアルゴリズムの開発<BR>
３）アルゴリズムのシミュレートによる評価<BR>
４）他のアルゴリズムとの比較<BR>
<BR><BR>
<B><FONT size="+1">アルゴリズムの基礎要素の列挙と比較：</FONT></B><BR><BR>
<B><FONT size="+1">ａ）動的加牌法：</FONT></B><BR>
現在ある手牌に何らかの牌を加えることによって評価する方法。<BR>
<BR>
メリット：<BR>
変化形を自然に捉えられる。<BR>
複雑な形の「良さ」を自然に判定できる。<BR>
評価順序のアルゴリズム依存がない。<BR>
いくつかの確率を最も正確に捉えられる。<BR>
<BR>
デメリット：<BR>
対象が広域になると有用に機能しない。<BR>
加えるだけの段階では２通り以上の可能性から１つを選択することができない。<BR>
<BR>
具体例：<BR>
「現在ある手牌に、残りツモ順分の牌を加える。メンツを構成した牌や頭になった牌は得点をつける。点数が低い牌を切る」<BR>
12333から12も33も「まずまず必要」と評価してしまうために、これらを切ることができない。<BR>
対象が広域であり、234567とあると14ソウ引きによって7ソウが不要と判断されるなど、加牌が多くなると挙動が安定しなくなる。<BR>
<BR>
<B><FONT size="+1">ｂ）動的減牌法：</FONT></B><BR>
現在ある手牌からメンツや牌を抜き出すことによって評価する方法。<BR><BR>
メリット：<BR>
処理速度を向上できる。<BR>
２通り以上の可能性から１つを選択し固定できる。<BR>
<BR>
デメリット：<BR>
形の変化を追いにくい。<BR>
評価順序依存になる場合がある。<BR>
<BR>
具体例：<BR>
「完成メンツを抜き取り、完成していない部分の形を比較し良い形を残す」<BR>
23456から先に456を抜いてしまう、4567から567を抜いて先に4を切ってしまうなどの危険がある。<BR>
<BR>
<B><FONT size="+1">ｃ）静的法</FONT></B><BR>
現在ある手牌に変化を加えず、そのまま評価する方法。<BR>
メリット：<BR>
高速。<BR>
単純でわかりやすい。<BR>
<BR>
デメリット：<BR>
形の変化をほとんど捉えられない。<BR>
<BR>
具体例：<BR>
「現在のメンツやターツを確認し、メンツやターツを構成しない牌を切る」<BR>
いわゆる「初心者の棒テン」である。手牌全体を漠然と見る感覚だが、この方法は有効には機能しない。<BR>
<BR>
<BR>
<B><FONT size="+1">和了を目指すために重要な基礎要素：</FONT></B><BR>
<BR>
これについては私の研究に既にある通りの基礎要素を用いることができる。<BR>
以下、「面前メンツ構成技術論」より主要部を要約して抜粋。<BR><BR>
｛<BR>
和了のために必要充分な複数の独立な「課題」がある。<BR>
例えばそれは｛「頭を作る」「メンツを作る」「メンツを作る」「メンツを作る」「メンツを作る」｝というセットであったり、｛「１シャンテンにする」「１シャンテンからテンパイにする」「テンパイしてから上がり牌が出る」｝のセットである。各々のセット内の一つ一つの条件を「課題」と呼ぶ。<BR>
こういったいくつかの「課題」各々の成功率を高めることはもちろんだが、<B>その</B><B>成功確率が最も低い「課題」の成功率をより高める打ち方が、最も効率的な打ち方</B>である。<B><BR>
</B><BR>
例として、７８マン　２３７８ピン　２２４５６６７７ソウ　とあるとする。<BR>
明らかに「メンツオーバー」であるが、ここから４ソウを切るべきか、または他のリャンメンターツを１つ切るべきか？<BR>
これは和了のために「リャンシャンテン時の受け入れを多くする」か「イーシャンテン時の受け入れを多くする」かの選択と言える。<BR>
当然、成功率が高い「リャンシャンテン時の受け入れ」よりも、より成功率が低い「イーシャンテン時の受け入れ」を多くする方が良い。<BR>
つまりこの「何切る」への論理的解答は、リャンメンターツ落としなのだ。<BR>
<BR>
<B>「和了への各々の課題クリア確率を平均化しながら、平均を高めていく」ことが、牌効率の良い打ち方</B>なのだ。<BR>
<B>これこそが「牌効率」の重要な原理であって、和了するための技術において受け入れの枚数が１枚多いだのうんぬんというのは瑣末な問題に過ぎず、もしそれを「牌効率」と呼ぶなら、それは「和了率を高める」こととあまり関係のない、意味のない指標である</B>（和了率は上げたくないがシャンテン数だけをどうしても落としたいという人は俗に言われる方の「牌効率」を大事にしてください）<B>。</B><BR>
<BR>
※数学的補足<BR>
片方がpの確率で「成功」し、もう片方がqの確率で「成功」するような課題がある。ある一打の選択で、pはp+Δpに増加し、qはq-Δqに減少する場合を考える。<BR>
結局この一打によって全体の成功確率は　(p+Δp)(q-Δq)=pq＋Δp・q－p・Δq-ΔpΔq　に変化する。<BR>
qΔp＞p・Δq＋ΔpΔq　となるような場合にこの一打は有効である。<BR>
ΔpΔqは非常に小さな値なので<BR>
Δp／Δq　＞　p／q<BR>
が判定の式になる。<BR>
ΔpとΔqの比がおよそ１であるとき、明らかにqとして大きい方を選択するのが正しいことがわかる。これが上記への数学的裏付けである。<BR>
｝<BR>
（以上要約）<BR>
<BR>
ここに記述されているように、「和了する」ために最も重要なことは、「和了のために必要な要素のうち最も成功確率が低いものの確率を高めること」である。<BR>
アルゴリズムとしては、２シャンテンを１シャンテンにすることに腐心するより、１シャンテンをテンパイにすることに力を注ぐべきだということがわかるだろう。<BR>
<BR>
<BR>
<B><FONT size="+1">基礎要素を満足するアルゴリズム：</FONT></B><BR><BR>
手牌を、和了のために必要ないくつかの独立な要素に分割し、最も成功確率の低い要素部分の確率を上昇させることを考える。<BR>
ここでそれらの要素（和了要素）が各々独立で、かつ、和了要素のセットが和了のための十分条件となっている限り、分割の仕方は恣意的に選んで良い。<BR>
<BR>
ここでは、牌をメンツ・ターツ・その他の牌に分割し、各々がメンツ化する確率（メンツ化確率）を持つものとし、４メンツが揃うことを暫定的に「和了」と捉える。<BR>
あるメンツのメンツ化確率は1である。それに対して、<BR>
<BR><BR><BR>
　　　　　現在とつ先制ﾘｰﾁ率33.5％　　　過去とつ先制ﾘｰﾁ率29％　　　超ラン他家平均プレイヤー　　　コンピュータ（MJ-3-T8-3）<BR>
順目　　　リーチ率　　ﾘｬﾝﾒﾝﾘｰﾁ率　　　　リーチ率　　ﾘｬﾝﾒﾝﾘｰﾁ率　　　　リーチ率　　ﾘｬﾝﾒﾝﾘｰﾁ率　　　リーチ率　　ﾘｬﾝﾒﾝﾘｰﾁ率　　<BR>
01　　　　　0.24　　　　　0　　　　　　　　　　0.24　　　　　0.04　　　　　　　　0.22　　　　　　0.04　　　　　　　0.18　　　　0.08<BR>
02　　　　　0.48　　　　　0.24　　　　　　　　0.43　　　　　0.24　　　　　　　　0.45　　　　　　0.27　　　　　　　0.46　　　　0.17<BR>
03　　　　　1.38　　　　　1.14　　　　　　　　1.24　　　　　0.9　　　　　　　　　0.97　　　　　　0.7　　　　　　　　1.02　　　　0.59<BR>
04　　　　　2.61　　　　　2.09　　　　　　　　2.52　　　　　1.96　　　　　　　　1.81　　　　　　1.29　　
　　　　　2.05　　　　1.40<BR>
05　　　　　4.35　　　　　3.4　　　　　　　　　4.11　　　　　3.15　　　　　　　　3.78　　　　　　2.88　　　　　　　4.25　　　　3.10<BR>
06　　　　　6.24　　　　　4.82　　　　　　　　6.47　　　　　5.14　　　　　　　　5.7　　　　　　　4.22　　　　　　　8.29　　　　6.74<BR>
07　　　　　10.54　　　　　7.5　　　　　　　　9.89　　　　　7.58　　　　　　　　8.85　　　　　　6.52　　　　　　　10.82
　　　6.70<BR>
08　　　　　15.91　　　　12.48　　　　　　　13.55　　　　　10.77　　　　　　　11.42　　　　　8.26　　　　　　　12.4　　　　8.7<BR>
09　　　　　20.87　　　　16.26　　　　　　　18.36　　　　　14.16　　　　　　　15.24　　　　　10.39　　
　　　　17.2　　　　12.9<BR>
10　　　　　29.51　　　　21.73　　　　　　　25.58　　　　　18.63　　　　　　　18.82　　　　　12.52　　　
　　　22.8　　　　14.3　　　　　20.80　　　15.93<BR>
11　　　　　35.87　　　　27.74　　　　　　　31.8　　　　　　23.44　　　　　　　23.31　　　　　15.19　　　　　　
24.37　　　18.1<BR>
12　　　　　42.27　　　　32.76　　　　　　　36.73　　　　　26.72　　　　　　　27.63　　　　　18.24　　　　
　　28.1　　　　22.4<BR>
13　　　　　51.96　　　　　37　　　　　　　　43.33　　　　　30.73　　　　　　　32.01　　　　　21.7　　　　　　　34.5　　　　27.7<BR>
14　　　　　58.21　　　　40.13　　　　　　　48.2　　　　　　33.65　　　　　　　36.52　　　　　24.6　　　　　　　39.1　　　　31.6<BR>
15　　　　　63.59　　　　43.35　　　　　　　52.77　　　　　35.94　　　　　　　40.03　　　　　27.67　　　　
　　42.9　　　　34.6<BR>
16　　　　　66.62　　　　46.38　　　　　　　56.45　　　　　38.39　　　　　　　42.43　　　　　28.27　　　　　　
44.4　　　　　35.7<BR>
<BR>
<BR>
<BR>
<BR>
</P>
</BODY>
</html>
